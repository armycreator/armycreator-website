{% extends 'SitiowebArmyCreatorBundle:Army:detail.html.twig' %}

{% block title %}
    {{ "army.bbcode.title"|trans }} - 
    {{ parent() }}
{% endblock %}

{% block armyDetail %}
<textarea cols="150" rows="30">{{- "" -}}
    {# === army name === #}
    {{- "[b][u]" ~ army.name ~ " (" ~ army.breed.name ~ ") : " ~ army.points ~ " " ~ "army.bb_code.points"|trans ~ "[/u][/b]" -}}

    {# === squad type list === #}{{- "" -}}
    {% for tmp in army.squadListByType %}{{- "" -}}
        {% if tmp.squadList %}
            {{- "\n\n" -}}
            {# === squad type name === #}
            {{- "[b][color=" ~ preferences.colorSquadType ~ "]" -}}
                {{- tmp.unitType.name -}}
                {% if tmp.unitType.breed != army.breed %}
                    {{- " (" ~ tmp.unitType.breed.name ~ ")" -}}
                {% endif %}
            {{- "[/color][/b]" -}}

            {# === squad list === #}
            {{- "\n[list]" -}}
            {% for squad in tmp.squadList %}{{- "" -}}
                {# === squad name === #}
                {{- "\n\t[*][color=" ~ preferences.colorSquad ~ "]" ~
                        squad.name|default(squad.unitType.name ~ ' #' ~ loop.index) ~
                        "[/color] (" ~ squad.points ~ "pts)" -}}

                {# === squad line list === #}
                {{- "\n\t[list]" -}}
                {% for squadLine in squad.squadLineList %}{{- "" -}}
                    {# === unit name/number === #}
                    {{- "\n\t\t[*][color=" ~ preferences.colorSquadDetail ~ "]" ~ squadLine.number ~ " " ~ squadLine.unit.name ~ "[/color]" -}}

                    {# === unit stuff list === #}{{- "" -}}
                    {% if not(squadLine.squadLineStuffList.empty) %}
                        {{- "\n\t\t[list]" -}}
                            {{- "\n\t\t\t[*] " -}}
                            {% for squadLineStuffList in squadLine.squadLineStuffList %}{{- "" -}}
                                {% if not loop.first %}
                                    {{- preferences.separator -}}
                                {% endif %}
                                {{- squadLineStuffList.number ~ " " ~ squadLineStuffList.unitStuff.stuff.name -}}
                            {% endfor %}
                        {{- "\n\t\t[/list]" -}}
                    {% endif %}
                {% endfor %}
                {{- "\n\t[/list]" -}}
            {% endfor %}
            {{- "\n[/list]" -}}
        {% endif %}{{- "" -}}
    {% endfor %}{{- "" -}}
</textarea>
{% endblock %}

