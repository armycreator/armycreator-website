{% extends 'SitiowebArmyCreatorBundle::layout.html.twig' %}

{% block title %}
    {{ "unit_stuff.edit.title"|trans({"%unit%": edit_form.unit.vars.data.name, "%stuff%": edit_form.stuff.vars.data.name}) }}
{% endblock %}

{% block content %}
    {% set breed = app.request.get("breed") %}
    {% set game = breed.game %}
    {% set params = {"game": game.code, "breed": breed.slug} %}

    <form action="{{ path("unitstuff_update", params + { "id": entity.id }) }}" method="post" {{ form_enctype(edit_form) }} class="opaque">
        <input type="hidden" name="_method" value="PUT" />
        <div>
            {{ form_row(edit_form.unit) }}
            {{ form_row(edit_form.stuff) }}
            {{ form_row(edit_form.points) }}
            {{ form_row(edit_form.auto) }}
            {{ form_row(edit_form.visible) }}
        </div>

        <div class="txtright">
            {{ form_widget(edit_form.edit, {"attr": {"class": "acButton acButtonBig"}}) }}
        </div>

        {{ form_rest(edit_form) }}
    </form>

    <div class="right">
        <form action="{{ path('unitstuff_delete', params + { "id": entity.id }) }}" method="post">
            <input type="hidden" name="_method" value="DELETE" />
            {{ form_widget(delete_form) }}
            <button class="acButton" type="submit">{{ "button.delete"|trans }}</button>
        </form>
    </div>
    <div>
        <a href="{{ path("admin_breed_unit", params) }}#unit-{{ entity.unit.slug }}">
            {{ "default.back_to_list"|trans }}
        </a>
    </div>
{% endblock %}

{% block javascripts %}
    {% if app.environment == 'dev' %}
        <!-- dev:unitstuff-edit.js -->
<script src="/tmp/js/unitstuff-edit.js/fuzzy-min_0.js"></script>
<script src="/tmp/js/unitstuff-edit.js/unitstuff-edit_1.js"></script>
<!-- endbuild -->
    {% else %}
        <!-- prod:unitstuff-edit.js --><!-- endbuild -->
    {% endif %}
{% endblock %}
